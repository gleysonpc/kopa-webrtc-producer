{"version":3,"sources":["contexts/auth.js","contexts/websocket.js","contexts/contextCompose.js","components/Chat/ChatItem/styles.js","assets/Avatar.png","components/Chat/ChatItem/index.jsx","components/Chat/styles.js","components/Chat/index.jsx","services/mediasoupService.js","components/Player/styles.js","components/MediaInputs/styles.js","components/MediaInputs/index.jsx","components/Player/index.jsx","pages/Producer/styles.js","services/socketService.js","pages/Producer/index.jsx","pages/SignIn/styles.js","pages/SignIn/index.jsx","routes/PrivateRoute.jsx","routes/index.jsx","styles/global.js","App.jsx","reportWebVitals.js","index.js"],"names":["initialState","signed","user","name","room","signIn","signOut","AuthContext","createContext","AuthProvider","children","useState","setUser","history","useHistory","a","localStorage","setItem","JSON","stringify","push","useEffect","localUser","getItem","parse","loadStorageData","Provider","value","removeItem","useAuth","useContext","socketConnection","ContextCompose","components","reverse","reduce","acc","curr","Array","isArray","props","SocketContext","socket","authenticateSocket","destroySocketConnection","SocketProvider","setSocket","userName","roomName","rawToken","token","jwt","sign","SocketIO","process","auth","transport","path","window","testeSocket","request","type","data","Promise","resolve","emit","on","roomId","getSocketConnection","connected","disconnect","ChatItemContainer","styled","div","ChatItem","message","src","avatarImg","alt","className","ChatContainer","ChatHeader","MessageList","MessageArea","form","Chat","setMessage","messages","setMessages","sortMessages","b","Date","createdAt","e","preventDefault","messagesList","sort","loadMessagesList","size","map","item","id","onSubmit","placeholder","onChange","target","this","_socket","_mediaDevice","_producer","_stream","socketInstance","stream","routerRtpCapabilities","mediasoup","error","console","log","load","serverRtpParameters","loadDevice","forceTcp","rtpCapabilities","createSendTransport","callback","errback","dtlsParameters","res","kind","rtpParameters","transportId","state","close","videoTrack","getVideoTracks","audioTrack","getAudioTracks","audioParams","track","videoParams","encodings","maxBitrate","produce","video","audio","PlayerContainer","PlayerFooter","Avatar","LiveButton","button","Container","Device","DeviceList","DeviceType","h6","RenderDevices","deviceList","deviceType","handleClose","ref","useClickOutside","device","index","label","MediaInputs","micDevicesList","camDevicesList","toggleCamera","toggleMicrofone","micActive","setMicActive","camActive","setCamActive","showMicDevices","setShowMicDevices","showCamDevices","setShowCamDevices","onClick","location","reload","Player","videoRef","audioTracks","videoTracks","toggleIsLive","isLive","autoPlay","disabled","Layout","Producer","setVideoTracks","setAudioTracks","audioSource","videoSource","localStream","setLocalStream","setIsLive","videoElement","useRef","gotStream","navigator","mediaDevices","enumerateDevices","then","devices","filter","catch","alert","getUserMedia","current","srcObject","mediaSoup","setStream","startTransmission","stopTransmission","tracks","enabled","SignInContainer","Form","Title","h2","SignIn","setName","setRoom","htmlFor","PrivateRoute","Component","component","rest","isAuthenticated","render","to","pathname","from","Routes","exact","GlobalStyle","createGlobalStyle","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.461cf64a.chunk.js","sourcesContent":["import React, { createContext, useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst initialState = { signed: null, user: { name: '', room: '' }, signIn: null, signOut: null }\n\nconst AuthContext = createContext(initialState);\n\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);    \n    const history = useHistory()\n\n    useEffect(() => {\n        async function loadStorageData() {\n            const localUser = localStorage.getItem('@user')\n            if (localUser) {\n                setUser(JSON.parse(localUser))\n                history.push('/')\n            }\n        }\n        loadStorageData();\n    }, [history]);\n\n    async function signIn({ name, room }) {\n        setUser({ name, room })\n        localStorage.setItem('@user', JSON.stringify({ name, room }))\n        history.push('/')\n    }\n\n    function signOut() {\n        setUser(null)       \n        localStorage.removeItem('@user')\n    }\n\n    return (\n        <AuthContext.Provider\n            value={{ signed: !!user, user: user, signIn, signOut }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    return context;\n}","import React, { createContext, useContext, useState } from 'react'\nimport SocketIO from 'socket.io-client'\nimport jwt from 'jsonwebtoken'\n\nconst SocketContext = createContext({\n    socket: {},\n    authenticateSocket: null,\n    destroySocketConnection: null,\n})\nlet socketConnection\n\nfunction getSocketConnection(userName, roomName) {\n    const rawToken = {\n        name: userName,\n        room: roomName,\n    }\n\n    const token = jwt.sign(rawToken, 'oqksmz')\n    const hostname = process.env.REACT_APP_WS\n\n    if (socketConnection) {\n        return socketConnection\n    }\n\n    socketConnection = SocketIO(hostname, {\n        auth: { token },\n        transport: ['websocket', 'polling'],\n        path: '/v6',\n    })\n\n    window.testeSocket = socketConnection\n\n    socketConnection.request = (type, data = {}) => {\n        return new Promise((resolve) => {\n            socketConnection.emit(type, data, resolve)\n        })\n    }\n\n    socketConnection.on('connect', async () => {\n        await socketConnection.request('joinRoom', { roomId: rawToken.room })\n    })\n\n    return socketConnection\n}\n\nexport function SocketProvider({ children }) {\n    const [socket, setSocket] = useState({})\n\n    function authenticateSocket(name, room) {\n        setSocket(getSocketConnection(name, room))\n    }\n\n    function destroySocketConnection() {\n        if (socket?.connected) {\n            socket.disconnect()\n        }\n    }\n\n    return (\n        <SocketContext.Provider\n            value={{ socket, authenticateSocket, destroySocketConnection }}\n        >\n            {children}\n        </SocketContext.Provider>\n    )\n}\n\nexport function useSocket() {\n    const context = useContext(SocketContext)\n    return context\n}\n","import React, { Fragment } from 'react';\n\nexport const ContextCompose = ({ components, children }) => (\n    <Fragment>\n        {components.reverse().reduce((acc, curr) => {\n            const [Provider, props] = Array.isArray(curr)\n                ? [curr[0], curr[1]]\n                : [curr, {}];\n            return <Provider {...props}>{acc}</Provider>;\n        }, children)}\n    </Fragment>\n);","import styled from 'styled-components'\n\nexport const ChatItemContainer = styled.div`\n    display: flex;\n    align-items: center;\n    margin: 10px 0;\n    img {\n        width: 50px;\n        height: 50px;\n        margin-right: 10px;\n    }\n\n    .message-section {\n        h5 {\n            margin: 0 0 3px 0;\n        }\n\n        p {\n            margin: 0;\n            font-size: 14px;\n            color: #7e8291;\n        }\n    }\n`","export default \"data:image/png;base64,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\"","import { ChatItemContainer } from './styles'\nimport avatarImg from '../../../assets/Avatar.png'\n\nexport default function ChatItem({ user, message }) {\n    return (\n        <ChatItemContainer>\n            <img src={avatarImg} alt=\"user avatar\" />\n            <div className=\"message-section\">\n                <h5>{user}</h5>\n                <p>\n                    {message}\n                </p>\n            </div>\n        </ChatItemContainer>\n    )\n}\n","import styled from 'styled-components'\n\nexport const ChatContainer = styled.div`\n    background-color: #262837;\n    height: calc(98vh - 20px);\n    border-radius: 20px;\n    width: 28%;\n    min-width: 300px;\n    position: relative;    \n    overflow: hidden;\n    margin-top: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    z-index: 11;\n\n    @media(max-width: 800px){\n        width: calc(100% - 40px);        \n        height: inherit;        \n        padding-bottom: 0;\n        margin: 0 20px 0 20px;\n    }\n\n`\n\nexport const ChatHeader = styled.div`\n    height: 70px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 20px;\n\n    p {\n        color: #7e8291;\n        svg {\n            margin-right: 5px;\n        }\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n`\n\nexport const MessageList = styled.div`\n    padding: 0 20px;\n    height: 100%;\n    display: flex;\n    flex-direction: column-reverse;\n    overflow-y: auto;       \n    align-content: flex-end;    \n`\n\nexport const MessageArea = styled.form`    \n    bottom: 0;\n    height: 60px;\n    display: flex;\n    width: 100%;\n    padding: 8px;\n    background: #262737;\n    position: relative;\n\n    input {\n        width: 100%;\n        background-color: #2e303f;\n        border: none;\n        color: #fff;\n        outline: none;\n        border-radius: 20px;\n        padding: 0 45px 0 10px;\n        height: 45px;\n    }\n\n    button {\n        background-color: #6b5ecd;\n        border: none;\n        color: #fff;\n        outline: none;\n        border-radius: 50%;\n        position: absolute;\n        height: 38px;\n        width: 38px;\n        top: 12px;\n        right: 13px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        &:hover{\n        filter: brightness(80%);\n        }\n\n        &:active{\n            filter: none;\n        }\n    }\n`","import { useEffect, useState } from 'react'\nimport { IoIosPeople, IoIosSend } from 'react-icons/io'\nimport { useAuth } from '../../contexts/auth'\nimport ChatItem from './ChatItem'\n\nimport { ChatContainer, ChatHeader, MessageList, MessageArea } from './styles'\n\nexport default function Chat() {\n    const { user } = useAuth()\n    const { socket } = window\n    const [message, setMessage] = useState('')\n    const [messages, setMessages] = useState([])\n\n    function sortMessages(a, b) {\n        return new Date(b.createdAt) - new Date(a.createdAt)\n    }\n\n    useEffect(() => {\n        async function loadMessagesList() {\n            const messagesList = await socket?.request('listChatMessages')\n            setMessages(messagesList?.sort(sortMessages))        }\n        if(socket?.connected){\n            loadMessagesList()\n        }\n    }, [socket])\n\n    async function sendMessage(e) {\n        e.preventDefault()\n        setMessage('')\n        await socket.request('chatMessage', { message })\n        const messagesList = await socket?.request('listChatMessages')\n        setMessages(messagesList?.sort(sortMessages))\n    }\n\n    useEffect(() => {\n        socket?.on('chatMessage', async (data) => {\n            setMessages([...messages, data.message].sort(sortMessages))\n        })        \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [socket])\n    \n    return (\n        <ChatContainer>\n            <ChatHeader>\n                <h3>Chat | {user.room} </h3>\n                <p>\n                    <IoIosPeople size={30} /> 20 Pessoas\n                </p>\n            </ChatHeader>\n            <MessageList>\n                {messages?.map((item) => (\n                    <ChatItem\n                        key={item.id}\n                        user={item.user.name}\n                        message={item.message}\n                    />\n                ))}\n            </MessageList>\n            <MessageArea onSubmit={sendMessage}>\n                <input\n                    placeholder=\"Digite sua mensagem...\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                />\n                <button type=\"submit\">\n                    <IoIosSend size={25} />\n                </button>\n            </MessageArea>\n        </ChatContainer>\n    )\n}\n","import * as mediasoup from 'mediasoup-client'\n\nclass MediaSoupService {\n    constructor() {\n        this._socket = null\n        this._mediaDevice = null\n        this._producer = {}\n        this._stream = null\n    }\n\n    setSocket(socketInstance) {\n        if (!this._socket) {\n            this._socket = socketInstance\n        }\n    }\n\n    setStream(stream) {\n        if (!this._stream) {\n            this._stream = stream\n        }\n    }\n\n    async loadDevice(routerRtpCapabilities) {\n        try {\n            this._mediaDevice = new mediasoup.Device()\n        } catch (error) {\n            console.log('## 2', error, mediasoup)\n            if (error.name === 'UnsupportedError') {\n                console.error('browser not supported')\n            }\n        }\n        await this._mediaDevice.load({ routerRtpCapabilities })\n    }\n\n    async stopTransmission() {\n        await this._socket.request('producerTransportClosed')\n    }\n\n    async startTransmission() {\n        const serverRtpParameters = await this._socket?.request(\n            'getRouterRtpCapabilities'\n        )\n        await this.loadDevice(serverRtpParameters)\n\n        let data = await this._socket.request('createProducerTransport', {\n            forceTcp: false,\n            rtpCapabilities: this._mediaDevice.rtpCapabilities,\n        })\n\n        const transport = this._mediaDevice.createSendTransport(data)\n\n        transport.on(\n            'connect',\n            async ({ dtlsParameters }, callback, errback) => {\n                try {\n                    const res = await this._socket.request(\n                        'connectProducerTransport',\n                        { dtlsParameters }\n                    )\n                    callback(res)\n                } catch (err) {\n                    errback(err)\n                }\n            }\n        )\n\n        transport.on(\n            'produce',\n            async ({ kind, rtpParameters }, callback, errback) => {\n                try {\n                    const { id } = await this._socket.request('produce', {\n                        transportId: transport.id,\n                        kind,\n                        rtpParameters,\n                    })\n                    callback({ id })\n                } catch (err) {\n                    errback(err)\n                }\n            }\n        )\n\n        transport.on('connectionstatechange', async (state) => {\n            switch (state) {\n                case 'failed':\n                    transport.close()\n                    break\n\n                default:\n                    break\n            }\n        })\n\n        if (!this._stream) {\n            return console.log('there is no stream provided!')\n        }\n\n        try {\n            const videoTrack = this._stream.getVideoTracks()[0]\n            const audioTrack = this._stream.getAudioTracks()[0]\n\n            const videoParams = { track: videoTrack }\n            const audioParams = { track: audioTrack }\n\n            videoParams.encodings = [\n                { maxBitrate: 100000 },\n                { maxBitrate: 300000 },\n                { maxBitrate: 900000 },\n            ]\n\n            this._producer.video = await transport.produce(videoParams)\n            this._producer.audio = await transport.produce(audioParams)\n\n\n        } catch (err) {\n            console.error('stream error', err)\n        }\n    }\n}\n\nexport default new MediaSoupService()\n","import styled from 'styled-components'\n\nexport const PlayerContainer = styled.div`\n    width: 100%;\n    overflow: hidden;\n    max-width: 70%;    \n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n    \n    \n    video {\n        border-radius: 15px;\n        width: 100%;\n        max-height: calc(100vh - 200px );\n        object-fit: cover;\n    }\n\n    @media(max-width: 800px){\n        max-width: 100%;    \n    }\n`\n\nexport const PlayerFooter = styled.div`\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n`\n\nexport const Avatar = styled.div`\n    display: flex;\n    align-items: center;\n\n    img {\n        height: 60px;\n        margin-right: 10px;\n    }\n`\n\nexport const LiveButton = styled.button`\n    background-color: #6b5ecd;\n    height: 60px;\n    border: none;\n    border-radius: 15px;\n    color: #fff;\n    padding: 10px 15px;\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;    \n    font-size: 17px;\n\n    svg {\n        margin-right: 5px;\n        margin-bottom: 6px;\n    }\n    \n    &:hover{\n        filter: brightness(80%);\n    }\n\n    &:active{\n        filter: none;\n    }\n\n    &.isLive {\n        background-color: red;\n    }\n\n    &:disabled{\n        background-color: #363342;\n    }\n`\n","import styled from 'styled-components'\n\nexport const Container = styled.div`\n    position: absolute;\n    bottom: 15px;\n    width: 70%;\n    display: flex;\n    justify-content: center;\n    z-index: 10;\n    .device-wrapper {\n        position: relative;\n        margin: 0 10px;\n    }\n\n    .list-devices {\n        position: absolute;\n        border-radius: 50%;\n        border: 1px solid #343a40;\n        height: 20px;\n        width: 20px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-color: #fff;\n        padding: 2px;\n        z-index: 5;\n        top: 4px;\n        right: -5px;\n    }\n\n    @media(max-width: 800px){\n        width: 95%;    \n    }\n`\n\nexport const Device = styled.div`\n    border-radius: 50%;\n    border: 1px solid #343a40;\n    height: 50px;\n    width: 50px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    position: relative;\n    background-color: #1f1d2c;\n    &.hangup{\n        background-color: red;\n    }\n`\n\nexport const DeviceList = styled.div`\n    position: absolute;\n    background-color: #262837;\n    border-radius: 5px;\n    z-index: 5;\n    bottom: 53px;\n    right: -110px;\n    padding: 10px;    \n\n    ul {\n        padding: 0;\n        margin: 0;\n        list-style: none;\n        li {\n            color: #fff;\n            text-align: center;\n            min-width: 250px;\n            cursor: pointer;\n            padding: 2px 10px;\n            margin: 5px 0;\n            font-size: 14px;\n            &.active {\n                border-radius: 5px;\n                padding: 10px;\n                background-color: #1f1d2c;\n            }\n        }\n    }\n`\nexport const DeviceType = styled.h6`\n    font-weight: bold;\n    text-align: center;\n    color: #fff;\n    margin: 5px 0;\n    margin-bottom: 15px;\n`","import { useState } from 'react'\nimport {\n    IoMdMic,\n    IoMdMicOff,\n    IoIosArrowDown,\n    IoIosArrowUp,\n} from 'react-icons/io'\nimport { IoVideocam, IoVideocamOff } from 'react-icons/io5'\nimport { ImPhoneHangUp } from 'react-icons/im'\nimport { useClickOutside } from '@mantine/hooks'\n\nimport { Container, Device, DeviceList, DeviceType } from './styles'\nimport { useAuth } from '../../contexts/auth'\n\nfunction RenderDevices({ deviceList, deviceType, handleClose }) {\n    const ref = useClickOutside(() => handleClose())\n\n    return (\n        <DeviceList ref={ref}>\n            <DeviceType>{deviceType}</DeviceType>\n            <ul>\n                {deviceList?.map((device, index) => (\n                    <li key={index}>{device?.label}</li>\n                ))}\n            </ul>\n        </DeviceList>\n    )\n}\n\nfunction MediaInputs({\n    micDevicesList,\n    camDevicesList,\n    toggleCamera,\n    toggleMicrofone,\n}) {\n    const [micActive, setMicActive] = useState(true)\n    const [camActive, setCamActive] = useState(true)\n    const [showMicDevices, setShowMicDevices] = useState(false)\n    const [showCamDevices, setShowCamDevices] = useState(false)\n    const { signOut } = useAuth()\n    const { socket } = window\n     \n    function handleToggleCamera() {\n        if (camActive) {\n            setCamActive(false)\n            toggleCamera(false)\n        } else {\n            setCamActive(true)\n            toggleCamera(true)\n        }\n    }\n\n    function handleToggleMicrofone() {\n        if (micActive) {\n            setMicActive(false)\n            toggleMicrofone(false)\n        } else {\n            setMicActive(true)\n            toggleMicrofone(true)\n        }\n    }\n\n    function handleSignOut(){\n        socket.disconnect()\n        signOut() \n        window.location.reload()\n    }\n\n    return (\n        <Container>\n            <div className=\"device-wrapper\">\n                {showMicDevices && (\n                    <RenderDevices\n                        handleClose={() => setShowMicDevices(!showMicDevices)}\n                        deviceList={micDevicesList}\n                        deviceType=\"Microfones\"\n                    />\n                )}\n\n                <button\n                    className=\"list-devices\"\n                    onClick={() => setShowMicDevices(!showMicDevices)}\n                >\n                    {showMicDevices ? (\n                        <IoIosArrowUp size={20} />\n                    ) : (\n                        <IoIosArrowDown size={20} />\n                    )}\n                </button>\n                <Device onClick={handleToggleMicrofone}>\n                    {micActive ? (\n                        <IoMdMic size={30} />\n                    ) : (\n                        <IoMdMicOff size={30} />\n                    )}\n                </Device>\n            </div>\n\n            <div className=\"device-wrapper\">\n                {showCamDevices && (\n                    <RenderDevices\n                        handleClose={() => setShowCamDevices(!showCamDevices)}\n                        deviceList={camDevicesList}\n                        deviceType=\"Câmeras\"\n                    />\n                )}\n                <button\n                    className=\"list-devices\"\n                    onClick={() => setShowCamDevices(!showCamDevices)}\n                >\n                    {showCamDevices ? (\n                        <IoIosArrowUp size={20} />\n                    ) : (\n                        <IoIosArrowDown size={20} />\n                    )}\n                </button>\n                <Device onClick={handleToggleCamera}>\n                    {camActive ? (\n                        <IoVideocam size={30} />\n                    ) : (\n                        <IoVideocamOff size={30} />\n                    )}\n                </Device>\n            </div>\n\n            <div className=\"device-wrapper\">\n                <Device onClick={handleSignOut} className=\"hangup\">\n                    <ImPhoneHangUp size={25} />\n                </Device>\n            </div>\n        </Container>\n    )\n}\n\nexport default MediaInputs\n","import { MdLiveTv } from 'react-icons/md'\nimport { PlayerContainer, PlayerFooter, LiveButton, Avatar } from './styles'\nimport avatarImg from '../../assets/Avatar.png'\nimport MediaInputs from '../MediaInputs'\nimport { useAuth } from '../../contexts/auth'\n\nexport default function Player({\n    videoRef,\n    audioTracks,\n    videoTracks,\n    toggleCamera,\n    toggleMicrofone,\n    stream,\n    toggleIsLive,\n    isLive,\n}) {\n    const { user } = useAuth()\n    return (\n        <PlayerContainer>\n            <video autoPlay ref={videoRef}>\n                Your browser does not support the video tag.\n            </video>\n            <PlayerFooter>\n                <Avatar>\n                    <img src={avatarImg} alt=\"Avatar\" />\n                    <p>{user.name}</p>\n                </Avatar>\n                <LiveButton\n                    disabled={!stream}\n                    className={isLive ? 'isLive' : ''}\n                    onClick={() => toggleIsLive()}\n                >\n                    <MdLiveTv size={30} />\n                    {isLive ? 'Encerrar Live' : 'Iniciar Live'}\n                </LiveButton>\n            </PlayerFooter>\n\n            <MediaInputs\n                toggleCamera={toggleCamera}\n                toggleMicrofone={toggleMicrofone}\n                micDevicesList={audioTracks}\n                camDevicesList={videoTracks}\n            />\n        </PlayerContainer>\n    )\n}\n","import styled from 'styled-components'\n\nexport const Layout = styled.div`\n    display: flex;\n    justify-content: space-between;\n\n    @media(max-width: 800px){\n        flex-direction: column;\n    }\n`","import SocketIO from 'socket.io-client'\nimport jwt from 'jsonwebtoken'\n\nlet socketConnection\n\nexport function getSocketConnection(userName, roomName) {\n    const rawToken = {\n        name: userName,\n        room: roomName\n    }\n\n    const token = jwt.sign(rawToken, 'oqksmz')\n    const hostname = process.env.REACT_APP_WS\n\n    if (socketConnection) {\n        return socketConnection\n    }\n\n    socketConnection = SocketIO(hostname, { auth: { token }, transport: ['websocket', 'polling'], path: '/v6' })   \n\n    socketConnection.request = (type, data = {}) => {\n        return new Promise((resolve) => {\n            socketConnection.emit(type, data, resolve)\n        })\n    }\n\n    socketConnection.on('connect', async () => {\n        await socketConnection.request('joinRoom', { roomId: rawToken.room })\n    })\n    window.socket =  socketConnection\n\n    return socketConnection\n}","import { useEffect, useRef, useState } from 'react'\nimport Chat from '../../components/Chat'\nimport mediaSoup from '../../services/mediasoupService'\n\nimport Player from '../../components/Player'\n\nimport { Layout } from './styles'\nimport { useAuth } from '../../contexts/auth'\nimport {getSocketConnection} from '../../services/socketService'\n\nexport default function Producer() {\n    const [videoTracks, setVideoTracks] = useState([])\n    const [audioTracks, setAudioTracks] = useState([])\n\n    const [audioSource /*setAudioSource */] = useState(true)\n    const [videoSource /*setVideoSource */] = useState(true)\n    const [localStream, setLocalStream] = useState()\n    const [isLive, setIsLive] = useState(false)\n    const {user} = useAuth()\n    const {socket} = window\n\n    const videoElement = useRef()\n \n    // function stopLocalStream() {\n    //     if (localStream) {\n    //         localStream.getTracks().forEach((track) => track.stop())\n    //     }\n    // }\n\n\n    function gotStream(stream) {\n        setLocalStream(stream)\n\n        navigator.mediaDevices\n            .enumerateDevices()\n            .then((devices) => {\n                setAudioTracks(\n                    devices.filter((device) => device.kind === 'audioinput')\n                )\n                setVideoTracks(\n                    devices.filter((device) => device.kind === 'videoinput')\n                )\n            })\n            .catch((error) => {\n                console.log(error)\n                alert('Fail to get devices!')\n            })\n    }\n\n    function toggleCamera(state = true) {\n        const tracks = localStream.getVideoTracks()\n        tracks[0].enabled = state\n    }\n\n    function toggleMicrofone(state = true) {\n        const tracks = localStream.getAudioTracks()\n        tracks[0].enabled = state\n    }\n\n    useEffect(() => {\n        if(user.name){\n            getSocketConnection(user.name, user.room)\n        }                \n    },[user.name, user.room])\n\n    useEffect(() => {\n        navigator.mediaDevices\n            .getUserMedia({ audio: audioSource, video: videoSource })\n            .then(gotStream)\n            .catch((error) => console.log(error))\n    }, [audioSource, videoSource])\n\n    useEffect(() => {\n        navigator.mediaDevices\n            .enumerateDevices()\n            .then((devices) => {\n                setAudioTracks(\n                    devices.filter((device) => device.kind === 'audioinput')\n                )\n                setVideoTracks(\n                    devices.filter((device) => device.kind === 'videoinput')\n                )\n            })\n            .catch((error) => {\n                console.log(error)\n                alert('Fail to get devices!')\n            })\n    }, [])\n\n    useEffect(() => {\n        videoElement.current.srcObject = localStream\n    }, [localStream])\n\n    function toggleIsLive() {        \n\n        if (!socket.connected) return alert('Socket não conectado!')\n        if (!localStream) return alert('Nenhuma fonte de de mídia disponível!')\n\n        if (socket.connected && localStream && !isLive) {\n            mediaSoup.setSocket(socket)\n            mediaSoup.setStream(localStream)\n            mediaSoup.startTransmission()\n            setIsLive(true)\n            return\n        } else {           \n            mediaSoup.stopTransmission()\n            setIsLive(false)\n        }\n    }\n\n    return (\n        <Layout>\n            <Player\n                isLive={isLive}\n                toggleIsLive={toggleIsLive}\n                stream={localStream}\n                toggleCamera={toggleCamera}\n                toggleMicrofone={toggleMicrofone}\n                videoRef={videoElement}\n                audioTracks={audioTracks}\n                videoTracks={videoTracks}\n            />\n            <Chat />\n        </Layout>\n    )\n}\n","import styled from 'styled-components'\n\nexport const SignInContainer = styled.div`\n    height: 98vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;    \n`\n\nexport const Form = styled.form`\n    background-color: #222430;\n    max-width: 500px;\n    width: 400px;\n    height: 500px;\n    border-radius: 15px;\n    display: flex;\n    flex-direction: column;\n    padding: 30px;\n    justify-content: space-between;\n    \n    label {\n        color: #7e8291;    \n        margin-left: 10px;    \n    }\n\n    input {\n        width: 100%;\n        background-color: #2e303f;\n        border: none;\n        color: #fff;\n        outline: none;\n        border-radius: 20px;\n        padding: 10px;\n        height: 45px;\n        margin: 5px 0 20px 0;\n    }\n\n    button {\n        background-color: #6b5ecd;\n        height: 60px;\n        border: none;\n        border-radius: 15px;\n        color: #fff;\n        padding: 10px 15px;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;    \n        font-size: 17px;\n\n        svg {\n            margin-right: 5px;\n            margin-bottom: 6px;\n        }\n        \n        &:hover{\n            filter: brightness(80%);\n        }\n\n        &:active{\n            filter: none;\n        }\n    }\n`\n\nexport const Title = styled.h2`\n    text-align: center;\n`","import { useState } from 'react'\nimport { useAuth } from '../../contexts/auth'\nimport { SignInContainer, Form, Title } from './styles'\n\nexport default function SignIn() {\n    const { signIn } = useAuth()\n    const [name, setName] = useState('')\n    const [room, setRoom] = useState('')\n\n    function handleSignIn(e) {\n        e.preventDefault()\n        if (!name || !room)\n            return alert('O seu nome e a sala devem ser informados!')\n\n        signIn({ name, room })\n    }\n\n    return (\n        <SignInContainer>\n            <Form onSubmit={handleSignIn}>\n                <Title>Entrar</Title>\n                <div>\n                    <label htmlFor=\"name\">Nome</label>\n                    <input\n                        value={name}\n                        id=\"name\"\n                        type=\"text\"\n                        placeholder=\"Informe seu nome\"\n                        onChange={(e) => setName(e.target.value)}\n                    />\n                    <label htmlFor=\"room\">Sala</label>\n                    <input\n                        value={room}\n                        id=\"room\"\n                        type=\"text\"\n                        placeholder=\"informe o nome da sala\"\n                        onChange={(e) => setRoom(e.target.value)}\n                    />\n                </div>\n                <button type=\"submit\">ENTRAR</button>\n            </Form>\n        </SignInContainer>\n    )\n}\n","import { Redirect, Route } from 'react-router-dom'\nimport { useAuth } from '../contexts/auth'\n\nexport default function PrivateRoute({ component: Component, ...rest }) {\n    const { signed } = useAuth()\n    const isAuthenticated = signed\n\n    return (\n        <Route\n            {...rest}\n            render={(props) =>\n                isAuthenticated ? (\n                    <Component {...props} />\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: '/signin',\n                            state: { from: props.location },\n                        }}\n                    />\n                )\n            }\n        />\n    )\n}\n","import { Route, Switch } from 'react-router-dom'\nimport Producer from '../pages/Producer'\nimport SignIn from '../pages/SignIn'\nimport PrivateRoute from './PrivateRoute'\n\nexport default function Routes() {\n    return (\n        <Switch>\n            <PrivateRoute path=\"/\" component={Producer} exact />\n            <Route path=\"/signin\" component={SignIn} />\n        </Switch>\n    )\n}\n","import { createGlobalStyle } from 'styled-components'\n\n\nexport const GlobalStyle = createGlobalStyle`\n    html {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    -ms-overflow-style: scrollbar;\n    }\n\n    *,\n    *::before,\n    *::after {\n    -webkit-box-sizing: inherit;\n            box-sizing: inherit;\n    }\n    \n    body{\n      font-family: sans-serif;\n      background-color: #1f1d2c;\n      color: #fff;\n    }\n`","import { BrowserRouter } from 'react-router-dom'\nimport { AuthProvider } from './contexts/auth'\nimport { ContextCompose } from './contexts/contextCompose'\nimport { SocketProvider } from './contexts/websocket'\nimport Routes from './routes'\nimport { GlobalStyle } from './styles/global'\n\nfunction App() {\n    return (\n        <>\n            <GlobalStyle />\n            <BrowserRouter>\n                <ContextCompose components={[AuthProvider, SocketProvider]}>\n                    <Routes />\n                </ContextCompose>\n            </BrowserRouter>\n        </>\n    )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}